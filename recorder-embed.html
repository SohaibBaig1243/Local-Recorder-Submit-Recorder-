<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <title>Video Recorder â€” Download & Submit</title>
    <link rel="stylesheet" href="recorder-private-optimized.css" />
    <style>
      html { box-sizing: border-box; }
      *, *::before, *::after { box-sizing: inherit; }

      /* Optional: make embedded iframe background transparent */
      body.embed { background: transparent; }

      /* iframe container styling */
      .iframe-container {
        width: 100%;
        max-width: 920px;
        margin: auto;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 6px 18px rgba(0,0,0,0.06);
      }
    </style>
  </head>
  <body class="embed">

    <h1 style="text-align:center; margin-bottom:1rem;">Embedded Video Recorder</h1>

    <div class="iframe-container">
      <iframe 
          src="index.html"  <!-- Your recorder page -->
          width="100%" 
          height="600" 
          style="border:0;" 
          allow="camera; microphone; autoplay; encrypted-media" 
          loading="lazy">
      </iframe>
    </div>

    <!-- PostMessage for parent page -->
    <script>
      // Listen to messages from iframe (recorder page)
      window.addEventListener('message', function(event) {
        // Optional: security check
        // if(event.origin !== 'https://yourdomain.com') return;

        if(event.data.status === 'completed') {
          console.log('Recording completed! File URL:', event.data.fileUrl);
          alert('Recording ready! File URL: ' + event.data.fileUrl);
        }
      });
    </script>

  </body>
</html>
